<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="keywords" />
    <meta content="" name="description" />
    <title>Cart Details</title>
    <link
      rel="icon"
      type="image/x-icon"
      href="https://i.pinimg.com/736x/89/f1/d6/89f1d65fe8b8bf81eb8ddbb417537d17.jpg"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Glide.js CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/css/glide.core.min.css"
    />

    <!-- Glide.js JS -->
    <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/glide.min.js"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap"
      rel="stylesheet"
    />
    <!-- Icon Font Stylesheet -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <link href="/client/lib/lightbox/css/lightbox.min.css" rel="stylesheet" />
    <link
      href="/client/lib/owlcarousel/assets/owl.carousel.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/client/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Template Stylesheet -->
    <link href="/client/css/style.css" rel="stylesheet" />
    <link href="/client/css/product/cart.css" rel="stylesheet" />
    <link href="/client/css/layout/layout.css" rel="stylesheet" />
  </head>
  <body>
    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <%- include('../layout/header') %>
    <div class="container py-3 mt-5" style="margin-top: 10% !important">
      <!-- ƒêi·ªÅu h∆∞·ªõng breadcrumb -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="/" class="text-decoration-none">Trang ch·ªß</a>
          </li>
          <li class="breadcrumb-item">
            <a href="/cart" class="text-decoration-none">Chi ti·∫øt gi·ªè h√†ng</a>
          </li>
        </ol>
      </nav>

      <hr />

      <!-- Ti√™u ƒë·ªÅ ch√≠nh -->
      <h2 class="fw-medium text-dark mt-4 mb-5">Gi·ªè h√†ng c·ªßa b·∫°n</h2>

      <div class="row justify-content-between">
        <!-- B·∫£ng s·∫£n ph·∫©m -->
        <div class="col-lg-7">
          <div class="table-responsive">
            <table class="table text-center align-middle">
              <thead class="table-light">
                <tr>
                  <th>S·∫£n ph·∫©m</th>
                  <th>T√™n</th>
                  <th>Gi√°</th>
                  <th>S·ªë l∆∞·ª£ng</th>
                  <th>T·∫°m t√≠nh</th>
                  <th>H√†nh ƒë·ªông</th>
                </tr>
              </thead>
              <tbody>
                <% if (cartDetails && cartDetails.length > 0) { %> <%
                cartDetails.forEach((item) => { %>
                <tr>
                  <td>
                    <div
                      class="d-flex align-items-center justify-content-center"
                      style="width: 80px; height: 80px; overflow: hidden"
                    >
                      <img
                        src="/images/product/<%= item.product.image || 'no-image.jpg' %>"
                        class="img-fluid object-fit-contain"
                        style="width: 100%; height: 100%"
                        alt="<%= item.product.name %>"
                      />
                    </div>
                  </td>
                  <td><%= item.product.name %></td>
                  <td>
                    <%= item.product.price.toLocaleString('vi-VN', { style:
                    'currency', currency: 'VND' }) %>
                  </td>
                  <td>
                    <div class="input-group quantity" style="width: 100px">
                      <input
                        type="text"
                        class="form-control form-control-sm text-center border-0 shadow-none"
                        value="<%= item.quantity %>"
                        data-id="<%= item.id %>"
                        data-price="<%= item.product.price %>"
                      />
                    </div>
                  </td>
                  <td>
                    <%= (item.product.price *
                    item.quantity).toLocaleString('vi-VN', { style: 'currency',
                    currency: 'VND' }) %>
                  </td>
                  <td>
                    <form
                      method="POST"
                      action="/delete-product-in-cart/<%= item.id %>"
                    >
                      <button
                        class="btn btn-sm btn-outline-danger rounded-circle"
                      >
                        <i class="fa fa-times"></i>
                      </button>
                    </form>
                  </td>
                </tr>
                <% }) %> <% } else { %>
                <tr>
                  <td colspan="6">
                    <div class="alert alert-warning text-center my-4">
                      üõí Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng. Vui l√≤ng th√™m s·∫£n ph·∫©m ƒë·ªÉ
                      ti·∫øp t·ª•c mua s·∫Øm!
                    </div>
                  </td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
          <a href="/" class="btn btn-outline-primary mt-2">
            <i class="bi bi-arrow-left-circle me-1"></i> Ti·∫øp t·ª•c mua s·∫Øm
          </a>
        </div>

        <!-- Th√¥ng tin thanh to√°n -->
        <div
          class="col-lg-4 <%= !(cartDetails && cartDetails.length > 0) ? 'd-none' : '' %>"
        >
          <div
            class="bg-white rounded-4 shadow p-4 border border-light-subtle rounded"
          >
            <h4 class="fw-bold text-dark border-bottom pb-3 mb-4">
              üõí T√≥m t·∫Øt ƒë∆°n h√†ng
            </h4>

            <!-- T·∫°m t√≠nh -->
            <div class="d-flex justify-content-between mb-3">
              <span class="text-muted">T·∫°m t√≠nh:</span>
              <strong class="text-dark">
                <%= totalPrice.toLocaleString('vi-VN', { style: 'currency',
                currency: 'VND' }) %>
              </strong>
            </div>

            <!-- V·∫≠n chuy·ªÉn -->
            <div class="d-flex justify-content-between mb-2">
              <span class="text-muted">Ph√≠ v·∫≠n chuy·ªÉn:</span>
              <span class="text-dark">Mi·ªÖn ph√≠</span>
            </div>

            <!-- T·ªïng thanh to√°n -->
            <div
              class="py-3 border-top border-bottom d-flex justify-content-between align-items-center mb-4"
            >
              <h5 class="mb-0 text-dark fw-bold">T·ªïng thanh to√°n:</h5>
              <h5 class="mb-0 text-total fw-bold">
                <%= totalPrice.toLocaleString('vi-VN', { style: 'currency',
                currency: 'VND' }) %>
              </h5>
            </div>
            <div class="d-grid gap-3">
              <label class="fw-semibold mb-2 text-dark"
                >Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n:</label
              >

              <!-- N√∫t Thanh to√°n COD -->
              <form method="get" action="/checkout">
                <button
                  type="submit"
                  class="btn btn-outline-primary w-100 fw-bold rounded-pill py-2"
                >
                  <i class="bi bi-box-arrow-in-right me-1"></i> Thanh to√°n khi
                  nh·∫≠n h√†ng (COD)
                </button>
              </form>

              <!-- N√∫t Thanh to√°n b·∫±ng m√£ QR -->
              <form action="/payment/zalo" method="POST">
                <input type="hidden" name="orderId" value="<%= order.id %>" />
                <button type="submit" class="btn btn-success">
                  Thanh to√°n b·∫±ng ZaloPay
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- back to top  -->
    <a href="#" class="btn border-3 rounded-circle back-to-top"
      ><i class="fa fa-arrow-up"></i
    ></a>
    <a href="#" class="btn border-3 rounded-circle back-to-top"
      ><i class="fa fa-arrow-up"></i
    ></a>
    <%- include('../layout/footer') %>

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/client/lib/easing/easing.min.js"></script>
    <script src="/client/lib/waypoints/waypoints.min.js"></script>
    <script src="/client/lib/lightbox/js/lightbox.min.js"></script>
    <script src="/client/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- Template Javascript -->
    <script src="/client/js/cart/cart.js"></script>
    <!-- <script src="/client/js/main.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="//code.tidio.co/jessuvetqgbmlfbbicxo08yqsjeeprfb.js"
      async
    ></script>
  </body>
</html>
